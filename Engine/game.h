#ifndef GAME_H
#define GAME_H

#include "drawer.h"
#include "location.h"
#include "sprite.h"
#include "player.h"

namespace StaticSprites
{
    const PROGMEM unsigned char playerSpriteData[] = {
      0x60, 0xD6, 0xA9, 0x95, 0xD1, 0xB5, 0xEE, 0x00, 0x00, 0x70, 0xC0, 0xEE, 0xD1, 0x95, 0xB1, 0xE4, 0x60, 0xD6, 0xA9, 0x95, 0xD1, 0xB5, 0xEE, 0x00, 0x00, 0xF0, 0xCE, 0xD1, 0x75, 0x91, 0xB5, 0xEE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xEE, 0xB5, 0xD1, 0x95, 0xA9, 0xD6, 0x60, 0xEE, 0xB5, 0x91, 0x75, 0xD1, 0xCE, 0xF0, 0x00, 0x00, 0xEE, 0xB5, 0xD1, 0x95, 0xA9, 0xD6, 0x60, 0xE4, 0xB1, 0x95, 0xD1, 0xEE, 0xC0, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x56, 0x6A, 0x2E, 0x4A, 0x00, 0x00, 0x00, 0x00, 0x30, 0x10, 0x2E, 0x6A, 0x4E, 0x0A, 0x00, 0x20, 0x56, 0x6A, 0x2E, 0x4A, 0x00, 0x00, 0x00, 0x00, 0x30, 0x2E, 0x0A, 0x6E, 0x4A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4A, 0x2E, 0x6A, 0x56, 0x20, 0x00, 0x00, 0x4A, 0x6E, 0x0A, 0x2E, 0x30, 0x00, 0x00, 0x00, 0x00, 0x4A, 0x2E, 0x6A, 0x56, 0x20, 0x00, 0x0A, 0x4E, 0x6A, 0x2E, 0x10, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    };

    static Sprite playerSprite = Sprite(StaticSprites::playerSpriteData, 8, 8);

    const PROGMEM unsigned char tileSpriteData[] = {
      0xff, 0xdf, 0xbf, 0xdf, 0xfb, 0xf7, 0xfb, 0xff, 0xff, 0xe1, 0xf5, 0x91, 0x85, 0xf5, 0xe1, 0xff, 0xb6, 0x86, 0x30, 0x36, 0xa6, 0x86, 0xb0, 0x32, 0xb6, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x32, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x88, 0x77, 0xdd, 0x7b, 0xee, 0x11, 0xff, 0xff, 0xfd, 0xda, 0xad, 0xdf, 0xf7, 0xeb, 0xf7, 0xb6, 0xb6, 0x2, 0xfa, 0xfa, 0xda, 0x2, 0xb6, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xab, 0xbd, 0xb5, 0xdd, 0xbb, 0xad, 0xb5, 0xdd, 0xff, 0x87, 0xb9, 0x5e, 0x5e, 0xb9, 0x87, 0xff, 0xb6, 0xb6, 0x6, 0x2, 0x2, 0x2, 0x6, 0xb6, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xbd, 0xd7, 0xb7, 0xfd, 0xdd, 0x6b, 0xff, 0xfb, 0xdb, 0xdb, 0xdb, 0xdf, 0xdf, 0xdb, 0xfb, 0xff, 0xff, 0x81, 0xff, 0xff, 0x30, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
    };
    
    static Sprite tileSprite = Sprite(StaticSprites::tileSpriteData, 8, 8);
};

namespace Texts
{
  static const PROGMEM char signGreetings[] = {"Hello World! This is a long winded sign, so be ready for some text! This is a small demo for the engine that I will be writing. You can find the source code on my GitHub page /NicholasDenaro. Please let me know if you like it!"};
  static const PROGMEM char signToFarm[] = {"North to Farm"};
  static const PROGMEM char signToMine[] = {"South to Mines"};
  static const PROGMEM char signToTown[] = {"East to Town"};

  
}

namespace Maps
{
    const PROGMEM unsigned char loc[273] = 
      "tttttttt|tttttttt"
      "t       |    %% t"
      "t%%HHH  |T  %%% t"
      "t%%HDH  |  %%%  t"
      "t%%%----|   %%  t"
      "t       |       t"
      "t  T    |  T    t"
      "t       |--------"
      "t       |       t"
      "t       |   ::  t"
      "t       |  :::  t"
      "t HHH   |  :::  t"
      "t HDH   | T::   t"
      "t  -----|       t"
      "t       |       t"
      "tttttttt|tttttttt";

      const PROGMEM unsigned char house[31] = 
      "WWWWWW"
      "======"
      "======"
      "======"
      "WWW_WW";
};

class Game
{
  private:
  Arduboy2 arduboy;
  Drawer drawer;
  Entity tiles;
  Location* _location;
  Location** locations;
  View view;
  int _imageIndex;
  int counter;
  unsigned char tileMap[256];
  
  public:
  static Player* player;
  static Game game;
  Game();
  Game(Arduboy2 arduboy);
  void tick();
  void start();

  Location* location();
  void setLocation(Location* location);
  int imageIndex();

  void showText(const char* text);
};

#endif
